---
import { problemasDentales } from "@/lib/data";
import TratamientosCard from "./TratamientosCard.astro";
import { ChevronLeft, ChevronRight } from "@lucide/astro";
---

<section id="tratamientos" class="py-24 bg-white overflow-hidden px-0 md:px-6">
  <div class="container mx-auto px-6 md:px-0">
    <div
      class="flex flex-col md:flex-row md:items-end justify-between gap-8 mb-16"
    >
      <div class="max-w-2xl">
        <h2
          class="text-brand-primary font-bold tracking-[0.2em] uppercase text-xs mb-4"
        >
          Tratamientos
        </h2>
        <h3
          class="text-4xl md:text-6xl font-serif text-slate-900 leading-[1.1]"
        >
          Soluciones integrales para
          <span class="italic text-brand-primary font-light"
            >tu bienestar dental</span
          >
        </h3>
      </div>

      <div class="hidden md:flex gap-4 mb-2">
        <button
          id="prevBtn"
          class="p-4 rounded-full border border-slate-200 hover:bg-brand-primary hover:text-white transition-colors duration-300 group"
          aria-label="Anterior"
        >
          <ChevronLeft class="w-6 h-6" />
        </button>
        <button
          id="nextBtn"
          class="p-4 rounded-full border border-slate-200 hover:bg-brand-primary hover:text-white transition-colors duration-300 group"
          aria-label="Siguiente"
        >
          <ChevronRight class="w-6 h-6" />
        </button>
      </div>
    </div>
  </div>

  <div
    id="scrollContainer"
    class="flex overflow-x-auto pb-12 snap-x snap-mandatory no-scrollbar gap-4 md:gap-6 px-6 md:px-12"
  >
    {problemasDentales.map((item) => <TratamientosCard p={item} />)}
  </div>
</section>

<style>
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
</style>

<script>
  const container = document.getElementById("scrollContainer");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");

  if (container && prevBtn && nextBtn) {
    // Calculamos cuÃ¡nto desplazar (el ancho de una tarjeta + el gap)
    const scrollAmount = 424;

    nextBtn.addEventListener("click", () => {
      container.scrollBy({ left: scrollAmount, behavior: "smooth" });
    });

    prevBtn.addEventListener("click", () => {
      container.scrollBy({ left: -scrollAmount, behavior: "smooth" });
    });
  }
</script>
